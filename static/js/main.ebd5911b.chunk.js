(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__3CvRl",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__2bkPr"}},11:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2AxMb",Modal:"Modal_Modal__2WBTT"}},26:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__DncjJ"}},27:function(e,t,a){e.exports={Button:"Button_Button__3R1xi"}},35:function(e,t,a){},4:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__DjWH3",SearchForm:"Searchbar_SearchForm__1ac2l",SearchFormButton:"Searchbar_SearchFormButton__21S85",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__8f9cn",SearchFormInput:"Searchbar_SearchFormInput__VhsfU"}},57:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var r=a(1),o=a.n(r),n=a(21),c=a.n(n),i=(a(35),a(12)),s=a(22),l=a(23),u=a(30),m=a(28),h=a(6),g=a(24),d=a.n(g),b=(a(57),a(58),a(25)),f=a.n(b);var S=function(e,t){var a="https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=").concat("23262406-c7298f4dbbc93d98b496e6608","&image_type=photo&orientation=horizontal&per_page=12");return f.a.get(a).then((function(e){return e}))},p=a(29),j=a(4),y=a.n(j),v=a(0);function _(e){var t=e.onSubmit,a=Object(r.useState)(""),o=Object(p.a)(a,2),n=o[0],c=o[1];return Object(v.jsx)("header",{className:y.a.Searchbar,children:Object(v.jsxs)("form",{className:y.a.SearchForm,onSubmit:function(e){e.preventDefault(),""===n.trim()?h.Notify.warning("Search field is empty."):t({image:n,page:1,hits:0})},children:[Object(v.jsx)("button",{type:"submit",className:y.a.SearchFormButton,children:Object(v.jsx)("span",{className:y.a.SearchFormButtonLabel,children:"Search"})}),Object(v.jsx)("input",{className:y.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:n,onChange:function(e){c(e.target.value)}})]})})}var O=a(26),x=a.n(O);function I(e){var t=e.children;return Object(v.jsx)("ul",{className:x.a.ImageGallery,children:t})}var w=a(10),M=a.n(w);function N(e){var t=e.imageGallery,a=e.toogleModal,r=e.writeSrcState;return 0!==t.length&&t.map((function(e){return Object(v.jsx)("li",{className:M.a.ImageGalleryItem,children:Object(v.jsx)("img",{src:e.webformatURL,alt:e.tags,className:M.a.ImageGalleryItemImage,onClick:function(){return t=e.largeImageURL,r(t),void a(!0);var t}})},e.id)}))}var L=a(27),B=a.n(L);function G(e){var t=e.onSubmit,a=e.currentPage;return 0!==e.totalHits&&Object(v.jsx)("button",{type:"submit",className:B.a.Button,onClick:function(e){e.preventDefault(),t({page:a+1,hits:0})},children:"Load more"})}var k=a(11),F=a.n(k);function T(e){var t=e.modalSrc,a=e.toogleModal;Object(r.useEffect)((function(){var e=function(e){"Escape"===e.code&&a(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[a]);return Object(v.jsx)("div",{className:F.a.Overlay,onClick:function(e){e.target===e.currentTarget&&a(!1)},children:Object(v.jsx)("div",{className:F.a.Modal,children:Object(v.jsx)("img",{src:t,alt:""})})})}var C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={images:[],name:"",page:null,showLoader:!1,hits:0,showModal:!1,modalSrc:""},e.dataRequestAPI=function(){var t=e.state,a=t.name,r=t.page;e.toogleLoader(!0),S(a,r).then((function(t){0===t.data.hits.length&&h.Notify.failure("Sorry, there are no images matching your search query. Please try again."),e.setState((function(e){return{images:[].concat(Object(i.a)(e.images),Object(i.a)(t.data.hits)),hits:e.hits+t.data.hits.length}})),e.state.hits>=t.data.totalHits&&e.setState({hits:0}),e.scrollToBottom()})).catch((function(e){h.Notify.failure("Sorry, there are no images matching your search query. Please try again.")})).finally((function(){return e.toogleLoader(!1)}))},e.scrollToBottom=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.writeValuesToState=function(t){t.image?e.setState({images:[],name:t.image,page:t.page,hits:t.hits}):e.setState({page:t.page,hits:t.hits})},e.toogleLoader=function(t){return e.setState({showLoader:t})},e.toogleModal=function(t){e.setState({showModal:t})},e.writeSrcState=function(t){e.setState({modalSrc:t})},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){this.state.name===t.name&&this.state.page===t.page||this.dataRequestAPI()}},{key:"render",value:function(){var e=this.state,t=e.images,a=e.page,r=e.hits,o=e.showModal,n=e.modalSrc;return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(_,{onSubmit:this.writeValuesToState}),Object(v.jsx)(I,{children:Object(v.jsx)(N,{imageGallery:t,toogleModal:this.toogleModal,writeSrcState:this.writeSrcState})}),this.state.showLoader&&Object(v.jsx)(d.a,{type:"Audio",color:"#3f51b5",height:80,width:80,timeout:500,className:"Loader"}),Object(v.jsx)(G,{totalHits:r,onSubmit:this.writeValuesToState,currentPage:a}),o&&Object(v.jsx)(T,{modalSrc:n,toogleModal:this.toogleModal})]})}}]),a}(r.Component);c.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(C,{})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.ebd5911b.chunk.js.map